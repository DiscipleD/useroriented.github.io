# rxjs学习笔记

## 常见异步流分析

callback会很容易写出带有副作用的代码，而fp建议我们把函数参数拿出来。函数不过是一个仅仅包含输入和输出的黑盒。而黑盒更方便用于服用和组合，也更方便我们推断程序行为，即使是异步的

事件系统，如果你不在正确的时间监听事件，则会有丢失事件的风险。而且事件系统也有用到回调。还包括可读性问题和很难推理程序逻辑的问题，因为你需要担心异步的问题。

rxjs没有这些：

1. 异步函数里最小化的同步控制流(for 循环)
2. 异步代码里错误处理是很棘手的，而且当你用try/catch之后代码会更错综复杂。还有当你需要实现retry逻辑，即使有其他库帮助你，你也很极难写得出来。
3. 无关的逻辑总是参合在一起。我们需要写出高复用和更模块化的组件，这样我们就需要写出松耦合的代码，同时也方便单元测试。
4. 你的代码越嵌套得深，逻辑越难理解。函数和其他变量和函数混在一起，可读性和复杂性都是个问题
5. 太过依赖闭包。很容易造成副作用。
6. 很难检测事件或者长时操作什么时候会出错，什么时候需要取消。比如一个http请求太长，是脚本问题还是服务器太慢？所以我们需要判断在多久之后能直接取消事件。但是如果你自己实现可取消的机制，也是非常有挑战性而且容易出错的。
7. 一个高质量的响应式设计必须要对用户在ui上的交互进行截流(throttle)，这样系统才不会负载。手动实现这个功能还是非常难做好的。在他们的作用域外调用函数访问数据会对整个系统造成不稳定性
8. 很少有人考虑过JavaScript程序的内存问题。特别是客户端代码。虽然浏览器在底层替我们做了很多事情。然而随着UI变得越来越大且丰富，我们注意到那些正在运行的事件监听器会造成内存泄露，而且增加浏览器需要处理数量从而增加了浏览器负担，
在以前的浏览器上更是如此。如今的JavaScript程序的复杂性和以前的程序已经有天壤之别了。

你当然可以用一些常见的技术，api或者其他库帮你解决这些问题，但是需要一些努力。一个可替代的方案就是es6的Promise